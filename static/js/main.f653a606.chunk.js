(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var n=s(7),c=s.n(n),a=s(2),o=s(1),r=(s(12),s(13),s(14),s(4)),u=s(3),i=s.n(u),l=function(e,t){return fetch("".concat("https://mate.academy/students-api").concat(e),t).then((function(e){if(!e.ok)throw"".concat(e.status," - ").concat(e.statusText);return e.json()}))},j=function(e){return new Promise((function(t){return setTimeout(t,e)}))},b=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(1e3);case 2:return e.abrupt("return",l(t>0?"/posts?userId=".concat(t):"/posts"));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(1e3);case 2:return e.abrupt("return",l("/posts/".concat(t)));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(1e3);case 2:return e.abrupt("return",l("/comments?postId=".concat(t)));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){return t="/comments/".concat(e),l(t,{method:"DELETE"});var t},p=function(e){return function(e,t){return l(e,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)})}("/comments",e)},f=s(0),h=Object(o.createContext)({posts:[],setPosts:function(){},selectedUserId:0,setSelectedUserId:function(){},selectedPostId:0,setSelectedPostId:function(){},showComments:!1,setShowComments:function(){},postComments:[],setPostComment:function(){},postsIsLoading:!1,setPostsIsLoading:function(){}}),x=function(e){var t=e.children,s=Object(o.useState)([]),n=Object(a.a)(s,2),c=n[0],u=n[1],l=Object(o.useState)(0),j=Object(a.a)(l,2),d=j[0],O=j[1],p=Object(o.useState)(0),x=Object(a.a)(p,2),v=x[0],_=x[1],C=Object(o.useState)(!1),N=Object(a.a)(C,2),P=N[0],S=N[1],w=Object(o.useState)([]),I=Object(a.a)(w,2),y=I[0],k=I[1],g=Object(o.useState)(!1),L=Object(a.a)(g,2),D=L[0],A=L[1],E=function(){var e=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.next=3,b(d);case 3:t=e.sent,u(t),A(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){E()}),[d]),Object(o.useEffect)((function(){m(v).then((function(e){return k(e)}))}),[v]);var U={posts:c,setPosts:u,selectedUserId:d,setSelectedUserId:O,selectedPostId:v,setSelectedPostId:_,showComments:P,setShowComments:S,postComments:y,setPostComment:k,postsIsLoading:D,setPostsIsLoading:A};return Object(f.jsx)(h.Provider,{value:U,children:t})},v=Object(o.memo)((function(){var e=Object(o.useContext)(h),t=e.posts,s=e.selectedPostId,n=e.setSelectedPostId,c=Object(o.useCallback)((function(e){n(e!==s?e:0)}),[s]);return Object(f.jsxs)("div",{className:"PostsList",children:[Object(f.jsx)("h2",{children:"Posts:"}),Object(f.jsx)("ul",{className:"PostsList__list",children:t.map((function(e){return Object(f.jsxs)("li",{className:"PostsList__item",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"[User #".concat(e.userId,"]:")}),e.body]}),Object(f.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){c(e.id)},children:e.id===s?"Close":"Open"})]},e.id)}))})]})})),_=(s(17),s(5)),C=s.n(_),N=Object(o.memo)((function(){var e=Object(o.useContext)(h).selectedPostId,t=Object(o.useState)(""),s=Object(a.a)(t,2),n=s[0],c=s[1],r=Object(o.useState)(""),u=Object(a.a)(r,2),i=u[0],l=u[1],j=Object(o.useState)(""),b=Object(a.a)(j,2),d=b[0],m=b[1],O=Object(o.useState)(!1),x=Object(a.a)(O,2),v=x[0],_=x[1],N=Object(o.useState)(!1),P=Object(a.a)(N,2),S=P[0],w=P[1],I=Object(o.useState)(!1),y=Object(a.a)(I,2),k=y[0],g=y[1],L=Object(o.useCallback)((function(e){var t=e.target,s=t.name,n=t.value;switch(s){case"name":c(n),_(!1);break;case"email":l(n),w(!1);break;case"body":m(n),g(!1)}}),[]),D=Object(o.useCallback)((function(){c(""),_(!1),l(""),w(!1),m(""),g(!1)}),[]),A=Object(o.useCallback)((function(t){t.preventDefault(),n&&i&&d&&(p({postId:e,name:n,email:i,body:d}),D()),n||_(!0),i||w(!0),d||g(!0)}),[n,i,d,e,p]);return Object(f.jsxs)("form",{className:"NewCommentForm",onSubmit:A,children:[Object(f.jsx)("div",{className:"form-field",children:Object(f.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:C()("NewCommentForm__input",{"input--error":v}),value:n,onChange:L})}),Object(f.jsx)("div",{className:"form-field",children:Object(f.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:C()("NewCommentForm__input",{"input--error":S}),value:i,onChange:L})}),Object(f.jsx)("div",{className:"form-field",children:Object(f.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:C()("NewCommentForm__input",{"input--error":k}),value:d,onChange:L})}),Object(f.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})})),P=(s(18),Object(o.memo)((function(){var e=Object(o.useContext)(h).postComments,t=Object(o.useCallback)((function(e){O(e)}),[]);return Object(f.jsx)("ul",{className:"PostDetails__list",children:e.map((function(e){return Object(f.jsxs)("li",{className:"PostDetails__list-item",children:[Object(f.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){t(e.id)},children:"X"}),Object(f.jsx)("p",{children:e.body})]},e.id)}))})}))),S=(s(19),function(){return Object(f.jsx)("div",{className:"Loader",children:Object(f.jsx)("div",{className:"Loader__content"})})}),w=Object(o.memo)((function(){var e=Object(o.useContext)(h),t=e.showComments,s=e.setShowComments,n=e.postComments,c=e.selectedPostId,u=Object(o.useState)(null),l=Object(a.a)(u,2),j=l[0],b=l[1],m=Object(o.useState)(!1),O=Object(a.a)(m,2),p=O[0],x=O[1],v=Object(o.useCallback)(Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,d(c);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=null;case 6:t=e.t0,b(t),x(!1);case 9:case"end":return e.stop()}}),e)}))),[c]);return Object(o.useEffect)((function(){v()}),[c]),p?Object(f.jsx)(S,{}):Object(f.jsxs)("div",{className:"PostDetails",children:[Object(f.jsx)("h2",{children:"Post details:"}),Object(f.jsx)("section",{className:"PostDetails__post",children:Object(f.jsx)("p",{children:null===j||void 0===j?void 0:j.body})}),!!n.length&&Object(f.jsxs)("section",{className:"PostDetails__comments",children:[Object(f.jsx)("button",{type:"button",className:"button",onClick:function(){s(!t)},children:"".concat(t?"Hide":"Show"," ").concat(n.length," comments")}),t&&Object(f.jsx)(P,{})]}),Object(f.jsx)("section",{children:Object(f.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(f.jsx)(N,{})})})]})})),I=function(){var e=Object(o.useContext)(h),t=e.posts,s=e.selectedUserId,n=e.setSelectedUserId,c=e.selectedPostId,r=e.setSelectedPostId,u=e.postsIsLoading,i=Object(o.useState)([]),j=Object(a.a)(i,2),b=j[0],d=j[1];Object(o.useEffect)((function(){l("/users").then((function(e){return d(e)}))}),[]);var m=Object(o.useCallback)((function(e){var t=e.target.value;n(Number(t)),r(0)}),[n]);return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("header",{className:"App__header",children:Object(f.jsxs)("label",{children:["Select a user: \xa0",Object(f.jsxs)("select",{className:"App__user-selector",id:"user-selector",name:"user-selector",value:s,onChange:m,children:[Object(f.jsx)("option",{value:"0",children:"All users"}),b.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]})}),Object(f.jsxs)("main",{className:"App__main",children:[Object(f.jsx)("div",{className:"App__sidebar",children:u?Object(f.jsx)(S,{}):t.length?Object(f.jsx)(v,{}):"No posts found"}),Object(f.jsx)("div",{className:"App__content",children:!!c&&Object(f.jsx)(w,{})})]})]})},y=function(){return Object(f.jsx)(x,{children:Object(f.jsx)(I,{})})};c.a.render(Object(f.jsx)(y,{}),document.getElementById("root"))}],[[20,1,2]]]);
//# sourceMappingURL=main.f653a606.chunk.js.map